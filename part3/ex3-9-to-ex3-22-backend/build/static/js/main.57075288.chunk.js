(this["webpackJsonpex3-9-to-ex3-18-frontend"]=this["webpackJsonpex3-9-to-ex3-18-frontend"]||[]).push([[0],{40:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(16),o=n.n(r),u=(n(7),n(6)),i=n(3),s=n(0),l=function(e){var t=e.newSearchNameVal,n=e.newSearchName;return Object(s.jsxs)("div",{children:["Filter shown with ",Object(s.jsx)("input",{onChange:t,value:n})]})},d=function(e){var t=e.onSubmit,n=e.newNameVal,c=e.newName,a=e.newNumberVal,r=e.newNum;return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("div",{children:["Name: ",Object(s.jsx)("input",{onChange:n,value:c})]}),Object(s.jsxs)("div",{children:["Number: ",Object(s.jsx)("input",{onChange:a,value:r})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){var t=e.name,n=e.number,c=e.buttonId,a=e.handleDeleteContact;return Object(s.jsxs)("div",{children:[t," \u27a1 ",n," ",Object(s.jsx)("button",{id:c,onClick:a,children:"delete"})]})},b=function(e){var t=e.message;return null===t?null:"Error"===t.substring(0,5)?Object(s.jsx)("div",{className:"error",children:t}):Object(s.jsx)("div",{className:"success",children:t})},f=n(4),h=n.n(f),m="/api/persons",O={getAllContact:function(){return h.a.get(m).then((function(e){return e.data}))},addContact:function(e){var t=h.a.post(m,e);return console.log("Adding"),t.then((function(e){return e.data}))},deleteContact:function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},updateContact:function(e){return h.a.put("".concat(m,"/").concat(e.id),e).then((function(e){return e.data}))}},x=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(i.a)(r,2),f=o[0],h=o[1],m=Object(c.useState)(""),x=Object(i.a)(m,2),p=x[0],v=x[1],w=Object(c.useState)(""),g=Object(i.a)(w,2),N=g[0],C=g[1],S=Object(c.useState)(null),k=Object(i.a)(S,2),E=k[0],V=k[1];Object(c.useEffect)((function(){O.getAllContact().then((function(e){a(e)}))}),[]);var y=new RegExp(N,"i"),A=""===N?n:n.filter((function(e){return e.name.match(y)}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook \u260e\ud83d\udcd6"}),Object(s.jsx)(b,{message:E}),Object(s.jsx)(l,{newSearchNameVal:function(e){C(e.target.value)},newSearchName:N}),Object(s.jsx)("h2",{children:"Add New Contact in PhoneBook \ud83d\udcd6"}),Object(s.jsx)(d,{onSubmit:function(e){e.preventDefault();if(n.some((function(e){return e.name===f}))){if(window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))){var t=n.find((function(e){return e.name===f})),c=Object(u.a)(Object(u.a)({},t),{},{phoneNumber:p});O.updateContact(c).then((function(e){a(n.map((function(t){return t.name!==e.name?t:c}))),V("Contact successfully updated"),setTimeout((function(){V(null)}),5e3)})).catch((function(e){V("Error =>".concat(e.response.data.error.toString())),setTimeout((function(){V(null)}),5e3)}))}}else if(""===p)alert("Please give ".concat(f," a phone number :)"));else{var r={name:f,phoneNumber:p};O.addContact(r).then((function(e){V("".concat(e.name,"'s contact added successfully")),setTimeout((function(){V(null)}),5e3),O.getAllContact().then((function(e){a(e)}))})).catch((function(e){V("Error =>".concat(e.response.data.error.toString())),console.log(e.response.data.error),setTimeout((function(){V(null)}),5e3)})),h(""),v("")}},newNameVal:function(e){h(e.target.value)},newName:f,newNumberVal:function(e){v(e.target.value)},newNum:p}),Object(s.jsx)("h2",{children:"Numbers \u260e"}),Object(s.jsx)("ul",{children:A.map((function(e){return Object(s.jsx)("li",{children:Object(s.jsx)(j,{name:e.name,number:e.phoneNumber,buttonId:e.id,handleDeleteContact:function(){return function(e){window.confirm("Remove ".concat(e.name," from list of contacts?"))&&O.deleteContact(e.id).then((function(){a(n.filter((function(t){return t.id!==e.id})))})).catch((function(t){alert("This contact has been deleted from server"),a(n.filter((function(t){return t.id!==e.id})))}))}(e)}})},e.id)}))})]})};o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(x,{})}),document.getElementById("root"))},7:function(e,t,n){}},[[40,1,2]]]);
//# sourceMappingURL=main.57075288.chunk.js.map